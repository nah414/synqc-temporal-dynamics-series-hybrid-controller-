const MOBIUS_IMAGE_MIME = 'image/png';
const MOBIUS_IMAGE_GZIP_BASE64 = 'H4sIAAAAAAACA+zcMW+bOBIA4H9FjI8e7zNkmadUsdmMoZ1zpp3TOsePiu2Xto7sakCgMslMIF20STgESN4/3S+ihhMBLbZZm+ykSJwij7P64pt6LGSyAKBkj7bNJHaeYhxy68IYpGyQxVxaMJgQ2eDZ4m73A+fPD1/efP0Ks+Pu+n8VnFKvW+9X+MM5P6FH/itvPEOD8eyr/BYh4vF0zS6LAc8MeRrSXxaWlX1nURNvaOc4U5XaWlN0xRW0cG6ZavW+ODN661Zfrk8VMXFBmmy6wCNxBWw3aUFGciOGdf68Yxi1QhDwiRB9wpcuFzvjTmx8nJg5MZcHpVb4w8xCZ0wTnEDZQOjBY6veDRCvJcvY/BPgl/PWawtvAMFVYxtFx/vUZy0yc+D9um6sYSkosJxrl99GU6gj2wZSNIaGhAYJrCjoJlBx2FSZ+tKZ6JdrUGVluZBn8JJaHWUYdVYiZMogxbNQoOBB8JcPcr6ngPvuPxLr1gXzzBvt8z5+yknpGA9dYUNUpMQMcB3P1pFzvTVPr4g1ZQ54hF5/Dxc8sbSmhM9y/OUl8g3HWAKaKDLNrESbHoHBxnOJhPXYU8Z6cyBZ59D7yHlp9grzIf54f4jWe3/mGkv/x7APZ880iJu8G3O49iFgi3lVyqsXwK2hkKdpcHv3bT0+oRslCMQplF8e+2lqYT4/31Vmjt5FKhsMtOiE+6bRQwrbRgY1aUSg4E7WNj91xnuuqZ4J6cAi17+KlmqRrujgvhn32IaT4ZhfeMNJnlNreLk0Hjm1dn3+gqLEsp9LuFpDvZFCJ8zTxahqYIEvm2V9S8fajZPdN0cZpNMEJ60xZ+VpHqx6a8OOEV0blMGpmDb5HLbclA/KNtfNKuF2Gv16lXohLbsBtzbtCDy7ydL8dWNtDjNMMjVg50wGHjRN2nbqJeztGnIP+usrTCorXqzhFz4q4TA7+n9sbK4OT3/wYdL3GOUJb5HPtMj/5+Sg7Db5EBnPSZXe2oB9BiOuJWhkQYfy9q9rwKGGW0HN09lzlMoONBtq2k2UPetJsXR7EXglc3JwSZgc7k2kWwM5HeDeaF99V87Gj+lQjHuJKkABmwHmrfO+zH2oe98mT4TsXlsOJrGDV06KCs6D5fzfvuPv0qh8fPPUVGE7eXD9jJqnn1Sbh5/1F9WWTyLf5v/i+9zklU0zUQ9jeLzx4mRwnJxFPJowj0Wpz9wGnVCpF05bIprLblEyPo/Bb2CBf5d40rJRIlzUbZe92kNaN5nMximn2bpp9dytPjisQLwzUSt1DHqz/L7N9vS458iZ5uQhghL4v7Cv98iHL5HSa+Mr2i68x6B+xUXmSr/cNcojoEX3A+x/ykPMYhJvNEe2yHhJhy1DNZ1X2TT3P7qyS541xJFrZ2+wdiWeRX1fa7PZyxfHH62PqaxIgK+x+a+6a6KNvuPjIYGy6WhlEZJ3w2sKPP8RQlGmLqp4tzA8ahf+FgfcVjXQWYRa9jTvJo/wcnMTulW0usaYXI2VzHoFTx03jcuIMLRL1aTwrGO6wwmXWvmfY6GxITnbUCqwAeftKWVsmvQ8SZDSgpYQfMrmu0uLHEQrfMSO9PlGfM2qTQrj/Yq+ccZeeMG38fp9dGFwsU/rUYTx69bTpjZvwkWmXjbkxxxSgDIiVkB7g/jYAfv/UMGBApx1LPg3omjXzHxSkhw0XZKpmQ8JiPXTdXvnd1WJyzqs4XmU1wd65aDgCExM9KIIlpK72Q8gAOzR+z+BfOOjEz+b0FcwWfh4rNzuvySfBA4wHPtlPFYfN9kW6vpYF1QM+2zbbrIMdFR8WR0LZbDeVJN6ZvO5uUXm3AA38LvVtNho6XseTLdKZ5X1rH7Ci8fZqQgejVcyWpdlbfARJfHi3h65MjWbs+PHqY4VKuO0lOUt7EnJ1jzScFQCOrKhZ5SxIWIjmlVGbNey79bsvDzIErAOKmGyEhuc0i4IyR1TVjf+Gc2O9tK+52y4fMUP7Ltgl7d4Fnq4+oZH5tyTlucl7B91ydd8cjPMNjwXfyzGmZCwLEs/1Ncl/bktnULIh+nwP251pO5Ny9I6HSmA7M6btfnA7vgSzW4684CTosFCB+39SZG0kbt/2UG/4AJNSWk64+e4lyXXVSz4vFzBcTHMMkSy1rWUmq8NJg9i7YXgwhyBrGOQO3wMEypZkH9wo9uVoB25NzXNtHr/Qfj4DRYFfANnbKo7bKZ2v16w2v8/qdMqq86nzS+Bpbz+RNcOO/I8lzntNLafsq0cZNIVzR5Qu0nNszpFMGbQZlm3bnyo7lptZAmp62LObJ80WZ7MZIPxkKBwjL/EbtKaWxn2bFBv24fczUp58XAmzX4VeKDav4NXP1etCFh/xNTuRxuBv1rW5mQ0MPV6EyPnZKxOudkuWUqZQQSA8CW7uqp1cNcUyQ2j+JnXzEflph+VqmJdgbNcmkgdSCY6PwNdYSlR+12YsZAzbZCgRmsSOrBKuHOELFcmg/0RqMkrYokOkM+HZ6NtTb1kMZ16hhLj0Zy6gXg5qh5+yybkvBV2UPgFS+wPuhxvYN4r2VB6PlzBW+sK0Kh0ELM6+ZDiE5KvN3Hf96qlIBUfi8OsQ8y3fIauutQvy0CjSwVT0ItGNT+JBs7O3hd65/VnfGKxCRvMzuqKLJZ6pPVOgSTyYVHtUcXw7rY93QJkqDOH5UD9dlXlCyKX1zVj5EeYL+Jc5fKsIxmGFhGhzGotwQIRr52NlZ2p4o77yisyLmIZw2d0w5pW/ABrRPl1F9h+gNBQWsC9h0t/5DGD+ukb7LhGB8qVqeyx0PoxSOtvfbWPVVBr62w/0S4VqHkirt6GMMhce7z03otH+AQgKpRWwgEHoCr1oXuYBvzzP+PYlo8KjmD8oXMhhrYxRvrCuApmxeMb15LNRKHvXxiYOuYOzuwDd8f9AN9h99nG2f5hfga+k8XPUDg5nw6XpdfZN+JUNuRDMKprkAS33Xb2crSiMK0rI9O+s6W7KySJhFihbGO6yHimFEF0Htp+kCw0MFeM+dsFRZX5TYMPxS79bU/Fuv9Z3H50NzR24LzIJwpnHWdTMoxY30MJpGS93WKkq8X1bXzby7zoC+QJx4mCI4G8j/p2omTE0aHiokUXxNSYxmQwyGZP0g5GAssSzkyShhLKBUnwkKQt2V0XkTvqw4UQixDNy1Ulov2Vj8mF3lsWtV+W3+GbdizYJd2VtyPGXtBY0H0LyZUq1Y6NyJbJ4k+ypvO6/K4zcTujlJtEwlv2Ud4KFtNh++i2DCuHAkE5xs4bUeMcVU8es9j5Q2I9iABv7jMl2qCCmWxTGslkEOL8cxZYF7cJXZYdGaOhNyuANsLcLmVMLnh9Lq+xHJXS8RqRxcPeGKhyJ7A9gJhOf/mqdXV7u2sx6GvqBynzA4MbIgThOBspNr44YVYbYdtrKt8zDjJxkwlNFDbNOynxJq5HqSZtQC4lRTNoP2qbGZ7EyxX5FcxXksoZTmTpgFMykgvA9tmxXXfQkSzavDLYkrAvzjXn35Q8QvHi2Oym74Vt1PAtMjUMfof8Cj+ZGWstcZ/mp+Viw2Ar6tFsNuuMlwL0OPwZDRpHnguzx2MMo88k/bthABBF4l+kGV7TzJ9w8iPq1bL1pJoY+yLvhcnD9ZbLkmaN5daCMWIRQa2uZj3p4RMeVdFZMVnkhPnrAqQ4ArSyMAkUG0rehnBP4qybaB5GfXMOOYWmKjz6SlWf3JN6+b8xhqdTF2spGRz7/5BEFkxwxcK5FF6qCfLki/GXHsmKkhPOEw6Z/P0moN6WLiKcRCr6AiT8ozn2Mw85hI7sKUYKU4LkOGYuD+Xux0S2W+kHoYTuFldCYpm4HZsKpMdN3cZC9uo/AWwShj8x9FQBQOQkPAAA='; /* gzip+base64 of the provided Mobius PNG */

async function resolveMobiusImageDataUrl() {
  if (typeof DecompressionStream === 'undefined') return '';
  const compressedBytes = Uint8Array.from(atob(MOBIUS_IMAGE_GZIP_BASE64), (c) => c.charCodeAt(0));
  const decompressedStream = new Blob([compressedBytes]).stream().pipeThrough(new DecompressionStream('gzip'));
  const decompressedBuffer = await new Response(decompressedStream).arrayBuffer();
  return `data:${MOBIUS_IMAGE_MIME};base64,${uint8ArrayToBase64(new Uint8Array(decompressedBuffer))}`;
}

function uint8ArrayToBase64(bytes) {
  let binary = '';
  const chunk = 0x8000;
  for (let i = 0; i < bytes.length; i += chunk) {
    binary += String.fromCharCode.apply(null, bytes.subarray(i, i + chunk));
  }
  return btoa(binary);
}
